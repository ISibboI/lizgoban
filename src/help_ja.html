<!DOCTYPE HTML>
<html lang="ja">
<head>
 <meta charset="UTF-8" />
 <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'">
 <title>LizGobanヘルプ</title>
 <link rel="stylesheet" href="help.css">
 <script src="help.js"></script>
</head>

<body>

<h1><a name="top">LizGoban <span class="ver"></span>ヘルプ</h1>

LizGobanは、<span class="ext" data-url="https://github.com/gcp/leela-zero">Leela Zero</span>と<span class="ext" data-url="https://github.com/lightvector/KataGo">KataGo</span>による囲碁の分析ツールです。

<hr>

以下はLizGoban 0.4.0（予定, 2020年4月）のヘルプの日本語訳です。
最新版とは異なる箇所があるかもしれません。参考としてお使いください。

<hr>

<h2><a name="Display">画面の表示</a></h2>

<h3>碁盤上の推奨手</h3>

<ul>
 <li>色　：　勝率</li>
 <li>不透明度　：　訪問数</li>
 <li>番号　：　推奨順位</li>
</ul>

<p>
通常、黄色（普通）、オレンジ（悪い）、赤（非常に悪い）の円が見えます。相手が悪い手を打ったときは、シアン(非常に良い)と緑(良い)の丸が見えます。小さな赤い丸は、まだ検索されていない次の候補です。
</p>

<p>
［マウス操作］
<ul>
 <li>クリック　：　石を置く</li>
 <li>推奨された手の上にカーソルを置く　：　主な変化を表示する</li>
 <li>右クリック　：　前の動きと同じ色の石を置く</li>
 <li>タグのついた石をクリックすると、この手に移動する。</li>
</ul>
</p>

<p>
最適な手が予想と異なる場合は、それぞれ赤と青のマスで表示され、エンジンの意見の変化に気づくことができます。四角の黒/白の角は、黒／白の計画を示しています。また、表示されている変化図の中にも登場します。これは特にAI対AIを見ているときに便利で、例えば「黒は8手後に拡張を期待しているが、白はカットを計画している！」というような場合に便利です(「Engine」メニューの「白の代替ウェイト(Alternative weights for white)」や、「Tool」メニューの「AI対AI (AI vs AI)」を参照してください)。
</p>

<p>
また、「View」メニューで「Lizzie式(Lizzie style)」を選択することもできます（上の数字＝勝率、下の数字＝訪問数）。KataGoを使用し、「View」メニューの「スコアバー(Score bar)」にチェックを入れると、上の数字がスコアに置き換わります。
</p>

<h3>勝率バー</h3>

<ul>
 <li>黒/白エリア　：　現在の盤面の勝率</li>
 <li>緑・赤の四角　：　最後の一手による勝率の変化（緑＝良、赤＝悪）</li>
 <li>三角形　：　推奨された次の一手の評価（高さ＝訪問、大きさ＝事前確率、青＝次の一手）</li>
 <li>反対方向の空三角形　：　最後の一手の評価</li>
 <li>灰色の数　：　最高の提案の訪問（＝勝率バーのトップ）</li>
 <li>灰色の曲線　：　探索プロセスの進行による評価の軌跡</li>
</ul>

「x」キーを長押しすると、勝率バーが拡大されます。「View」メニューの「勝率バーの拡大(Expand winrate bar)」も参照してください。大きな勝率バーでは、オレンジ色の丸が最近の訪問手（分析努力）、オレンジ色の斜線がPUCT（分析優先度）（x軸＝PUCT、y軸＝現在の勝率＋PUCTで予測される将来の順位）、オレンジ色の横線がLCB（提案順序の基準）を示しています。

<h3>勝率グラフ</h3>

主曲線　：　黒の勝率
<ul>
 <li>緑の部分(セグメント)　：　好手（勝率アップ）</li>
 <li>赤の部分（セグメント）　：　悪手（勝率低下）</li>
 <li>黄色の部分（セグメント）　：　エンジンが見逃した予想外の好手</li>
 <li>黄色の縦線　：　評価の誤差（対局前と対局後の評価の差）</li>
 <li>薄紫色の部分（セグメント）　：　他のエンジンによる推定</li>
</ul>

追加プロット[K=KataGoのみ]
<ul>
 <li>オレンジ色の点　：　黒の推定スコア[K]</li>
 <li>緑／ピンクのステップ　：　累積スコアロス[K]</li>
 <li>赤点：石の曖昧さ（生死100％の場合は低め）[K]</li>
 <li>上部の繰り返しの円　：　コウ争い（o / x = 接続・捕獲で解決）</li>
 <li>グラフ下の虹のバー　：　プレイしたゾーン（左＝紫、中央＝白など）</li>
 <li>グラフ横の虹の四角　：　ゾーンカラーマップ</li>
</ul>

グラフ上でクリック／ドラッグすると、対応する手に移動します。「x」キーを長押しすると、勝率グラフとゾーンカラーマップが拡大表示されます。「c」キーを押しながら、グラフ上にマウスを置くと、過去／未来のボードが一時的に表示されます。AI対AIを見ているときは、緑とピンクのカーブが黒と白のエンジンによる推定勝率を示しています。

<h3>コメント</h3>

最後の一手のコメントは、勝率グラフとボタンの下に表示されています。長い場合はクリックすると全体を見ることができます。「Edit」メニューの「info」で編集できます。

<h3>訪問数グラフ</h3>

もう一つの訪問経過のグラフは、<a href="#layout">横向きレイアウト</a>のウィンドウの右下に小さく表示されています。「View」メニューで「double_boards」を選択し、「x」キーを押すと勝率グラフのあった位置に大きく表示されます。

<ul>
 <li>x軸　：　総訪問数</li>
 <li>Y軸　：　各提案手の訪問回数</li>
 <li>点線の曲線　：　次の一手</li>
 <li>太いセグメント　：　最高の一手</li>
</ul>

<h3>碁盤上のその他のマーク</h3>

<a href="#Katago">KataGoの項</a>を参照してください。

<hr>

<h2><a name="Tips">ヒント</a></h2>

<h3><a name="TrialBoard">試行碁盤(trial board)</a></h3>

既存の対局を修正しようとすると、新しい碁盤が作成されます. この碁盤の境界線の色は「試行対局」であることを示しています。<a href="#Boards">「q」キー</a>ですばやく削除できます（削除の取り消し：Ctrl + z）。「Edit」メニューの「試行対局(trial board)」のチェックを外すと、通常の盤になります。クリック」の代わりに「Ctrl+クリック」で新しい試行碁盤で打つことができます。

<h3>ドラッグ＆ドロップ</h3>

SGFファイルやURLをLizGobanにドラッグ＆ドロップして開くことができます。

<h3>紛失したボードを復元</h3>

「Edit」メニューの「ボードの削除を解除(Undelete board)」はセッションをまたいで動作します。意図せずに終了した後に失われたボードを復元するには、Ctrl+zを試してみてください。

<h3>(弱くした)エンジンとの対戦</h3>

一番簡単な方法は「File」メニューの「Match vs AI」です。ここだけで十分な場合はスキップしても構いません。

<p>
<ol>
 <li>「View」メニューの「Raw board」を選択する</li>
 <li>自分のターンで碁盤をクリックして石を置く</li>
 <li>エンジンのターンでEnterキーを押す<br>
      または、"1", "2", ... , "9 "キーを押す（1=やや弱い手、9=非常に弱い手）<br>
      または、「0」キーを押す（勝率に余裕があるときにパスする。LeelaZeroのみ）</li>
</ol>
「Z」キーを長押しすると、予想手を見ることができます。
</p>

<p>
もう一つのハンデとして、異なるエンジンをランダムに混ぜて対戦することもできます。
<ol>
 <li>「View」メニューで「Raw board」を選択する</li>
 <li>「Engine」メニューの「Load network weights」からweightファイル（例：LZ38）を選択する</li>
 <li>「Engine」メニューの「Alternative weights for white」から別のウェイトファイル（例：LZ157）を選択する</li>
</ol>
これで、Enterキーを押すとLZ157が正常に白に使用されます。しかし、「1」キーを押すと、10%の確率でLZ38が白に使われます。「2」キーで20％、「3」キーで30％、...、「9」キーで90％となっています。
</p>

<h3><a name="layout">UIレイアウト</a></h3>

ウィンドウのサイズを変更することで、横向き／縦向きのレイアウトを切り替えることができます。「View」メニューも参照してください。

<h3><a name="letmethink">先に考えさせて(Let me think first)モード</a></h3>

「View」メニューで「Let me think first」を選択すると、「Tool」メニューで「自動リプレイ(Auto replay)」や「AI対AI」を選択すると、LizGobanは進行度0%～50%の間で無地の盤面を表示し、50%～100%の間でサジェストを表示してくれます。表示スタイルを手動で切り替えるには<a href="#Tab">「Tab」キー</a>を使用します。<a href="#semicolon">「;」キー</a>を連打すると、オートプレイなしでlet-me-think-firstスタイルを真似ることができます。

<h3>パーソナルエクササイズブック</h3>

「Tool]メニューの[練習問題として保存(Store as exercize)]で現在の碁盤を記憶し、[練習問題(Exercize)]で記憶した碁盤をランダムに表示することができます。TabキーまたはZキーを押すと、その解析結果が表示されます。

<!--
<h3>Backward scan in auto-analysis</h3>

There is a
<span class="ext" data-url="https://github.com/kaorahi/leela-zero/tree/ladder_revtrans">modified Leela Zero</span>
that do not forget promising moves after undo.
Replace leelaz with it and
set auto analysis visits as a negative value for backward analysis
(scan from the last move to the first move)
to get possibly better evaluations when some moves are in "blind spots" of Leela Zero.
-->

<hr>

<h2><a name="Shortcut">ショートカットキー</a></h2>

<h3>着手</h3>
<ul>
 <li>上/左矢印キー　：　前の手（シフト=15手)</li>
 <li>下/右矢印キー　：　次の手（シフト=15手)</li>
 <li>Homeキー　：　初手</li>
 <li>Endキー　：　最後の一手</li>
 <li>BS/Delキー　：　元に戻す</li>
 <li>pキー　：　 パス</li>
 <li>#キー　：　コメントを表示する</li>
</ul>

最初の(最後の)手で、上下左右(下/右)の矢印を長押しすると、Home(End)としても機能します。

<h3><a name="Boards">碁盤</a></h3>
<ul>
 <li>Ctrl+n　：　新しい空の碁盤</li>
 <li>Ctrl+d　：　碁盤の複製</li>
 <li>[　：　前の碁盤</li>
 <li>]　：　次の碁盤</li>
 <li>Ctrl+x　：　碁盤の削除（Ctrl+z　：　削除解除）</li>
 <li>Ctrl+w　：　碁盤の削除/ウィンドウを閉じる</li>
 <li>q　：　Ctrl+x と同じ (<a href="#TrialBoard">試行碁盤(trial board)</a>のみ)</li>
</ul>

<h3>分析</h3>
<ul>
 <li>スペース　：　分析の一時停止／再開</li>
 <li>a　：　自動分析の開始／停止（目的手数を入力してEnterキーを押して開始）</li>
 <li>Enter ： 最高の手(best move)を打つ（Shift=5手進む）</li>
 <li>` (backquote)　：　別の碁盤で最高の手を打つ</li>
 <li>,（カンマ）　：　主要なバリエーションを再生する</li>
</ul>

<h3>View</h3>

（押し続ける）
<ul>
 <li>z　：　提案やマークなどを非表示にする (「View」メニューのいくつかのスタイルで提案を表示する）</li>
 <li>x　：勝率グラフを拡大</li>
 <li>c　：手番号と座標を表示</li>
      <ul>
       <li> + 石の上にマウスを置く　：　この動きの後に石を非表示にする</li>
       <li> + 石の上でマウスクリック　：　この手数に行く</li>
      </ul>
 <li>1, 2, ...., 9, 0　：　n番目の変化を表示 (0 = 次の手)</li>
      <ul>
       <li> + エンター　：　この着手をする</li>
       <li> + ` (backquote)　：　この手を別の碁盤でプレイする</li>
       <li> + ,(コンマ)　：　このバリエーションを再生する</li>
       <li> + (Shiftなど、ほぼすべてのキーを押して離す)　：　表示されているバリエーションを更新する</li>
      </ul>
 <li>b, d, e, f, ...　：　タグ文字の後に石を隠す （+ Enter：この着手に行く）</li>
</ul>

(普通に打つ)
<ul>
 <li>Ctrl+Shift+n　：　新しいウィンドウ</li>
 <li>Shift+z　：　viewを切り替える（現在のview/raw board）</li>
 <li>Tab ： 表示の切り替え（現在の表示／前の表示）</li>
 <li>; (セミコロン)　：「<a href="#letmethink">先に考えさせて(Let me think first)</a>」スタイルで以下</li>
      <ul>
       <li>1回目＝示唆表示</li>
       <li>2回目＝前方移動・示唆非表示</li>
      </ul>
</ul>

<h3>SGF</h3>
<ul>
 <li>Ctrl+c　：　SGFをクリップボードにコピー</li>
 <li>Ctrl+v　：　クリップボードからSGFまたはURLを貼り付ける</li>
 <li>Ctrl+o　：　SGFファイルを開く</li>
 <li>Ctrl+s　：　SGFファイルの保存</li>
</ul>

<h3>エンジン</h3>
<ul>
 <li>Ctrl+r　：　エンジンをリセット</li>
 <li>Shift+l　：　weightファイルをロード</li>
 <li>Ctrl+Shift+l　：　白のweightファイルをロード</li>
 <li>Ctrl+Shift+u　：　ホワイトエンジンのアンロード</li>
</ul>

<hr>

<h2><a name="Katago">KataGo</a></h2>

<p>
KataGoを使用しているときは、「Tool」メニューに「コミ(Komi)」があり、「View」メニューに「スコアバー(Score bar)」があります。
</p>

<p>
また、「View」メニューには「勢力(Ownership)」があります。このメニューをオンにすると、各グリッドの推定勢力が半透明の黒/白の背景で表示されます。
</p>

<p>
また、黒または白の塊の領域数（＝勢力の合計）は、ボード上に半透明の緑／ピンクの数字で表示されます。この数字は次のように計算されます。
<ul>
 <li>空のグリッド（および死石）上の勢力のみが各塊の合計として計算されます。</li>
 <li>推定された合計スコアの補正値はボード上の右上隅に「+n」として表示されます。理想的には、碁盤上で生きている石の差か、ゲーム終了時のアゲハマの差に等しい。</li>
</ul>
そのため、(1)未来の石は考慮されず、(2)中立点(ダメ)もカウントされるため、正しい「領地」とは言えません。広い範囲の非常に小さい勢力の合計には、より小さなフォントが使用されています。
</p>

<p>
悪い手は石の上に三角形で表示されます (赤 = -5ポイント、紫 = -2ポイント)。「c」キーを長押しして、石をクリックすると、対応する手にジャンプします。「<」または「>」を押すと、そのようなミスを一つずつチェックすることができます。
</p>

<p>
盤面の小さな緑の四角とピンクの×は、最近の手で黒と白の可能性が高まっていることを示しています。「/」キーを長押しすると、この「最近の手」の前を覗くことができます。
</p>

<p>
「v」キーを長押しして、各マスの境界線と勢力(10=100%, 9=90%, ...)を確認します。「v」キー＋マウスオン（碁盤上または勝率グラフ上）で、指定した一手で過去のものと比較することができます。
</p>

<p>
推定スコアは勝率グラフのオレンジ色の点で表示されます。「最近の手」の開始点は、オレンジ色の大きな点で表示されています。「c」キー(長押し)+マウスオンで、指定した一手からの勢力変化を見ることができます。
</p>

<hr>

<a name="Misc"></a>
<span class="ext" data-url="https://github.com/kaorahi/lizgoban">Project Home</span>
<span class="ext" data-url="https://github.com/kaorahi/lizgoban/blob/master/LICENSE.txt">License (GPL3)</span>

<hr>

<div class="nav">
 <a href="#Display">画面表示</a> |
 <a href="#Tips">ヒント</a> |
 <a href="#Shortcut">ショートカットキー</a> |
 <a href="#Katago">KataGo</a> |
 <a href="#Misc">Link &amp; License</a>
</div>

</body>
